<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>au.com.postnewspapers</groupId>
    <artifactId>postupload</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>postupload Java EE 6 Webapp</name>
    <url>http://maven.apache.org</url>
    <repositories>
        <repository>
            <id>java.net2</id>
            <name>Repository hosting the jee6 artifacts</name>
            <url>http://download.java.net/maven/2</url>
        </repository>
    </repositories>
    <dependencies>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>2.0.1</version>
        </dependency>
        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>2.5</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey.contribs</groupId>
            <artifactId>jersey-multipart</artifactId>
            <version>1.5</version>
            <scope>compile</scope>
            <exclusions>
                <!-- These dependencies are in fact required to be present in
                     some form and of version 1.5 or greater. However, differences
                     between various app servers mean that we handle the dependency
                     in per-app-server profiles, and exclude them here. -->
                <exclusion>
                    <groupId>com.sun.jersey</groupId>
                    <artifactId>jersey-core</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jersey</groupId>
                    <artifactId>jersey-server</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.0.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1-beta-1</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>
        </plugins>
        <finalName>postupload</finalName>
    </build>
    <profiles>
        
        
        <profile>
            <id>glassfish3</id>
            <activation>
                <activeByDefault>true</activeByDefault>
                <property>
                    <name>appserver</name>
                    <value>glassfish3</value>
                </property>
            </activation>
            <build>
                <finalName>postupload-glassfish3</finalName>
            </build>
            <dependencies>
                <!-- Glassfish is a proper OSGi runtime and can cope with
                     us including an updated jersey runtime in our war -->
                <dependency>
                    <groupId>com.sun.jersey</groupId>
                    <artifactId>jersey-json</artifactId>
                    <version>1.5</version>
                </dependency>
                <dependency>
                    <groupId>com.sun.jersey</groupId>
                    <artifactId>jersey-server</artifactId>
                    <version>1.5</version>
                </dependency>
            </dependencies>
        </profile>
        
        
        <profile>
            <id>jbossas6</id>
            <activation>
                <property>
                    <name>appserver</name>
                    <value>jbossas6</value>
                </property>
            </activation>
            <build>
                <finalName>postupload-jbossas6</finalName>
            </build>
            <dependencies>
                <!-- 
                     For JBoss AS, you'll need to upgrade the server's copy of jersey.  
                     We can't bundle them in our war's lib/ because JBoss can't cope
                     with multiple different versions of them being present.
                     
                     Get Jersey 1.5 from here: http://download.java.net/maven/2/com/sun/jersey/jersey-archive/1.5/jersey-archive-1.5.zip
                     
                     .. and drop the jars from the jersey 1.5 archive into 
                     the jboss/server/default/lib/ directory, then restart jboss.
                     
                     This change will affect your WHOLE app server, not just this app.
                                          
                     The following stanzas just declare that postupload requires these
                     jars to be present. It doesn't install them.
                 -->
                <dependency>
                    <groupId>com.sun.jersey</groupId>
                    <artifactId>jersey-json</artifactId>
                    <version>1.5</version>
                    <scope>provided</scope>
                </dependency>
                <dependency>
                    <groupId>com.sun.jersey</groupId>
                    <artifactId>jersey-server</artifactId>
                    <version>1.5</version>
                    <scope>provided</scope>
                </dependency>
                
            </dependencies>
        </profile>
        
    </profiles>
</project>

